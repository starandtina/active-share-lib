!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("backbone"),require("underscore")):"function"==typeof define&&define.amd?define(["backbone","underscore"],t):"object"==typeof exports?exports.ActiveShareLib=t(require("backbone"),require("underscore")):e.ActiveShareLib=t(e.backbone,e.underscore)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(7)},,,function(t,n){t.exports=e},,function(e,n){e.exports=t},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=n(11),s=r(o),c=n(12),u=r(c),a={};a.createAction=i.createAction,a.createActions=i.createActions,a.createStore=s["default"],a.Model=u["default"],t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){e=e||{},_.isObject(e)||(e={actionName:e});for(var t in e)if(!a[t]&&s["default"][t])throw new Error("Cannot override API method "+t+" in action creation. Use another method name instead.");var n=0,r={};for(e.children=e.children||[];n<e.children.length;n++){var o=e.children[n];r[o]=i(o)}var c=_.defaults({eventEmitterToken:"action",emitter:_.extend({},new u["default"])},s["default"],new u["default"],e),f=function l(){return l.emit.apply(l,arguments)};return _.extend(f,c,r),f}Object.defineProperty(t,"__esModule",{value:!0}),t.createActions=t.createAction=void 0;var o=n(9),s=r(o),c=n(10),u=r(c),a={preEmit:1,shouldEmit:1},f=function(){var e=function(e,t){var n=_.keys(e);_.forEach(n,function(n){var r=e[n];t[n]=i(r)})};return function(t){var n={};return _.isArray(t)?t.forEach(function(t){_.isObject(t)?e(t,n):n[t]=i(t)}):e(t,n),n}}();t.createAction=i,t.createActions=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={preEmit:function(){},shouldEmit:function(){return!0},listen:function(e,t){t=t||this;var n=function(n){i||e.apply(t,n)},r=this,i=!1;return this.emitter.on(this.eventEmitterToken,n),function(){i=!0,r.emitter.off(r.eventEmitterToken,n)}},emit:function(){var e=arguments,t=this.preEmit.apply(this,e);e=void 0===t?e:_.isArguments(t)?t:[].concat(t),this.shouldEmit.apply(this,e)&&this.emitter.emit(this.eventEmitterToken,e)}},e.exports=t["default"]},function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){}var o=Object.prototype.hasOwnProperty,s="function"!=typeof Object.create?"~":!1;i.prototype._events=void 0,i.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)o.call(t,e)&&n.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},i.prototype.listeners=function(e,t){var n=s?s+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,c=new Array(o);o>i;i++)c[i]=r[i].fn;return c},i.prototype.emit=function(e,t,n,r,i,o){var c=s?s+e:e;if(!this._events||!this._events[c])return!1;var u,a,f=this._events[c],l=arguments.length;if("function"==typeof f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,n),!0;case 4:return f.fn.call(f.context,t,n,r),!0;case 5:return f.fn.call(f.context,t,n,r,i),!0;case 6:return f.fn.call(f.context,t,n,r,i,o),!0}for(a=1,u=new Array(l-1);l>a;a++)u[a-1]=arguments[a];f.fn.apply(f.context,u)}else{var h,v=f.length;for(a=0;v>a;a++)switch(f[a].once&&this.removeListener(e,f[a].fn,void 0,!0),l){case 1:f[a].fn.call(f[a].context);break;case 2:f[a].fn.call(f[a].context,t);break;case 3:f[a].fn.call(f[a].context,t,n);break;default:if(!u)for(h=1,u=new Array(l-1);l>h;h++)u[h-1]=arguments[h];f[a].fn.apply(f[a].context,u)}}return!0},i.prototype.on=function(e,t,n){var i=new r(t,n||this),o=s?s+e:e;return this._events||(this._events=s?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.once=function(e,t,n){var i=new r(t,n||this,!0),o=s?s+e:e;return this._events||(this._events=s?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.removeListener=function(e,t,n,r){var i=s?s+e:e;if(!this._events||!this._events[i])return this;var o=this._events[i],c=[];if(t)if(o.fn)(o.fn!==t||r&&!o.once||n&&o.context!==n)&&c.push(o);else for(var u=0,a=o.length;a>u;u++)(o[u].fn!==t||r&&!o[u].once||n&&o[u].context!==n)&&c.push(o[u]);return c.length?this._events[i]=1===c.length?c[0]:c:delete this._events[i],this},i.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[s?s+e:e]:this._events=s?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=s,e.exports=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=s["default"].extend(e);return new t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var o=n(12),s=r(o);e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=r(i),s=n(5),c=r(s),u=n(13),a=r(u),f=n(9),l=r(f),h=n(10),v=r(h),p=c["default"].extend({},{constructor:function(){if(this.emitter=new v["default"],this.eventEmitterToken="store-change",this.listenables)for(var e=[].concat(this.listenables),t=0;t<e.length;t++)this.listenToMany(e[t]);o["default"].Model.apply(this,arguments)}},a["default"],l["default"]);t["default"]=o["default"].Model.extend(p),e.exports=t["default"]},function(e,t){"use strict";function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){for(var t,n={},r=0;r<(e.children||[]).length;++r)t=e.children[r],e[t]&&(n[t]=e[t]);return n},i=function s(e){var t={};for(var i in e){var o=e[i],c=r(o),u=s(c);t[i]=o;for(var a in u){var f=u[a];t[i+n(a)]=f}}return t},o=function(e,t){return t=t||"on",t+n(e)};t["default"]={listenToActionOrStore:function(e,t){if(e&&_.isFunction(e,"listen")){var n=this.subscriptions=this.subscriptions||[],r=e.listen(this[t]||t,this),i=function(){var e=n.indexOf(o);-1!==e&&(n.splice(e,1),r())},o={stop:i,listenable:e};return n.push(o),o}},stopListeningTo:function(e){for(var t,n=this.subscriptions||[];t<n.length;t++){var r=n[t];if(r.listenable===e)return r.stop(),!0}return!1},stopListeningToAll:function(){for(var e,t=this.subscriptions||[];e=t.length;)t[0].stop()},listenToMany:function(e){var t=i(e);for(var n in t){var r=o(n),s=this[r]?r:this[n]?n:void 0;s&&this.listenToActionOrStore(t[n],s)}}},e.exports=t["default"]}])});